CC=emcc
CFLAGS=-Iinclude -s EXPORTED_FUNCTIONS='["_fann_cascadetrain_on_data","_fann_cascadetrain_on_file","_fann_clear_scaling_params","_fann_copy","_fann_create_array_8","_fann_create_from_file","_fann_create_shortcut","_fann_create_shortcut3","_fann_create_shortcut_array","_fann_create_sparse","_fann_create_sparse3","_fann_create_sparse_array","_fann_create_standard","_fann_create_standard3","_fann_create_standard_array","_fann_create_train","_fann_create_train_array","_fann_create_train_from_callback","_fann_create_train_pointer_array","_fann_descale_input","_fann_descale_output","_fann_descale_train","_fann_destroy","_fann_destroy_train","_fann_duplicate_train_data","_fann_get_","_fann_get_MSE","_fann_get_activation_function","_fann_get_activation_steepness","_fann_get_bias_array","_fann_get_bit_fail","_fann_get_bit_fail_limit","_fann_get_cascade_activation_functions","_fann_get_cascade_activation_functions_count","_fann_get_cascade_activation_steepnesses","_fann_get_cascade_activation_steepnesses_count","_fann_get_cascade_candidate_change_fraction","_fann_get_cascade_candidate_limit","_fann_get_cascade_candidate_stagnation_epochs","_fann_get_cascade_max_cand_epochs","_fann_get_cascade_max_out_epochs","_fann_get_cascade_min_cand_epochs","_fann_get_cascade_min_out_epochs","_fann_get_cascade_num_candidate_groups","_fann_get_cascade_num_candidates","_fann_get_cascade_output_change_fraction","_fann_get_cascade_output_stagnation_epochs","_fann_get_cascade_weight_multiplier","_fann_get_connection_array","_fann_get_connection_rate","_fann_get_decimal_point","_fann_get_errno","_fann_get_errstr","_fann_get_layer","_fann_get_layer_array","_fann_get_learning_momentum","_fann_get_learning_rate","_fann_get_multiplier","_fann_get_network_type","_fann_get_neuron","_fann_get_neuron_layer","_fann_get_num_input","_fann_get_num_layers","_fann_get_num_output","_fann_get_quickprop_decay","_fann_get_quickprop_mu","_fann_get_rprop_decrease_factor","_fann_get_rprop_delta_max","_fann_get_rprop_delta_min","_fann_get_rprop_delta_zero","_fann_get_rprop_increase_factor","_fann_get_sarprop_step_error_shift","_fann_get_sarprop_step_error_threshold_factor","_fann_get_sarprop_temperature","_fann_get_sarprop_weight_decay_shift","_fann_get_total_connections","_fann_get_total_neurons","_fann_get_train_error_function","_fann_get_train_input","_fann_get_train_output","_fann_get_train_stop_function","_fann_get_training_algorithm","_fann_get_user_data","_fann_get_weights","_fann_init_weights","_fann_length_train_data","_fann_merge_train_data","_fann_num_input_train_data","_fann_num_output_train_data","_fann_print_connections","_fann_print_error","_fann_print_parameters","_fann_randomize_weights","_fann_read_train_from_file","_fann_reset_MSE","_fann_reset_errno","_fann_reset_errstr","_fann_run","_fann_save","_fann_save_to_fixed","_fann_save_train","_fann_save_train_to_fixed","_fann_scale_data_to_range","_fann_scale_input","_fann_scale_input_train_data","_fann_scale_output","_fann_scale_output_train_data","_fann_scale_train","_fann_scale_train_data","_fann_set_","_fann_set_activation_function","_fann_set_activation_function_hidden","_fann_set_activation_function_layer","_fann_set_activation_function_output","_fann_set_activation_steepness","_fann_set_activation_steepness_hidden","_fann_set_activation_steepness_layer","_fann_set_activation_steepness_output","_fann_set_bit_fail_limit","_fann_set_callback","_fann_set_cascade_activation_functions","_fann_set_cascade_activation_steepnesses","_fann_set_cascade_candidate_change_fraction","_fann_set_cascade_candidate_limit","_fann_set_cascade_candidate_stagnation_epochs","_fann_set_cascade_max_cand_epochs","_fann_set_cascade_max_out_epochs","_fann_set_cascade_min_cand_epochs","_fann_set_cascade_min_out_epochs","_fann_set_cascade_num_candidate_groups","_fann_set_cascade_output_change_fraction","_fann_set_cascade_output_stagnation_epochs","_fann_set_cascade_weight_multiplier","_fann_set_error_log","_fann_set_input_scaling_params","_fann_set_learning_momentum","_fann_set_learning_rate","_fann_set_output_scaling_params","_fann_set_quickprop_decay","_fann_set_quickprop_mu","_fann_set_rprop_decrease_factor","_fann_set_rprop_delta_max","_fann_set_rprop_delta_min","_fann_set_rprop_delta_zero","_fann_set_rprop_increase_factor","_fann_set_sarprop_step_error_shift","_fann_set_sarprop_step_error_threshold_factor","_fann_set_sarprop_temperature","_fann_set_sarprop_weight_decay_shift","_fann_set_scaling_params","_fann_set_train_error_function","_fann_set_train_stop_function","_fann_set_training_algorithm","_fann_set_user_data","_fann_set_weight","_fann_set_weight_array","_fann_set_weights","_fann_shuffle_train_data","_fann_subset_train_data","_fann_test","_fann_test_data","_fann_test_data_parallel","_fann_train","_fann_train_epoch","_fann_train_epoch_batch_parallel","_fann_train_epoch_incremental_mod","_fann_train_epoch_irpropm_parallel","_fann_train_epoch_quickprop_parallel","_fann_train_epoch_sarprop_parallel","_fann_train_on_data","_fann_train_on_file"]'

all:
		#!! $(CC) main.c -o doublefann.js $(CFLAGS)
		#!! $(CC) main.c -o doublefann.min.js -O2 --memory-init-file 0 $(CFLAGS)
		$(CC) main.c -o doublefann.js $(CFLAGS) && printf "\nModule.FS=FS;\n" >> doublefann.js
		$(CC) main.c -o doublefann.min.js -O2 --memory-init-file 0 $(CFLAGS) && printf "\nModule.FS=FS;\n" >> doublefann.min.js

